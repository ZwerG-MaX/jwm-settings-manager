# data file for the Fltk User Interface Designer (fluid)
version 1.0302 
i18n_type 1 
i18n_include <libintl.h> 
i18n_function gettext 
header_name {.h} 
code_name {.cxx}
comment {/*                 Joe's Window Manager Configuration
 *
 * This program configures JWM using tinyxml2 and FLTK
 *
 *         Copyright (C) 2014  Israel <israel@torios.org>
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 * 
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 * This has been developed as a part of the ToriOS Project
 * This has been developed by Israel<israel@torios.org>
 *
 *
 * You may redistribute this, but you must keep this comment in place
 * Jesus is my Lord, and if you don't like it feel free to ignore it.
 */} {in_source in_header
} 

decl {\#include <libintl.h>} {public global
} 

decl {\#include <FL/Fl_File_Chooser.H>} {public global
} 

decl {\#include <string>} {public global
} 

decl {\#include <stdlib.h>} {public global
} 

decl {\#include <iostream>} {public global
} 

decl {\#include "../include/Config.h"} {public global
} 

decl {\#include "../include/Apps.h"} {public global
} 

decl {\#include <FL/Fl_Select_Browser.H>} {public global
} 

decl {\#include "../include/ui.h"} {public global
} 

class MenuUI {open : {public Config}
} {
  Function {make_window()} {open
  } {
    code {load();
saveChangesTemp();} {}
    Fl_Window menu_window {
      label {Menu proerties} open
      xywh {958 440 320 315} type Double color 31 hide resizable
      code0 {Config config;config.under_mouse(o);} xclass jwm-settings-manager
    } {
      Fl_Scroll {} {open
        xywh {0 0 320 315} color 31
      } {
        Fl_Button {} {
          label Configure
          callback {edit_an_item();}
          tooltip {Choose a program to add} xywh {205 235 80 30} box GTK_UP_BOX align 128
        }
        Fl_Button {} {
          label Cancel
          callback {cancel(menu_window);
UI ux;
ux.showSettings();}
          xywh {190 285 57 25} box GTK_UP_BOX color 80 selection_color 81 labelcolor 7
        }
        Fl_Button save_button {
          label OK
          callback {saveJWMRC(menu_window);
UI ux;
ux.showSettings();}
          tooltip {Write to configuration file} xywh {256 285 49 25} box GTK_UP_BOX color 61 selection_color 59 labelcolor 55
        }
        Fl_Button {} {
          label {@+  Item}
          callback {add_an_item();}
          tooltip {Add a menu item} xywh {10 235 65 35} box GTK_UP_BOX selection_color 47
        }
        Fl_Browser menuElement {
          callback {int linenum = o->value();
menuElementText->select(linenum);}
          xywh {25 80 85 140} type Hold box GTK_DOWN_BOX selection_color 80
        }
        Fl_Button {} {
          label { Item}
          callback {remove_an_item();}
          tooltip {remove a menu item} image {custom_buttons/minus} xywh {80 235 70 35} box GTK_UP_BOX align 256
        }
        Fl_Browser menuElementText {
          callback {int linenum = o->value();
menuElement->select(linenum);} selected
          xywh {120 80 185 140} type Hold box GTK_DOWN_BOX selection_color 80 labeltype NO_LABEL align 1
        }
        Fl_Browser root_menu {
          label {Root Menu }
          callback {int line = o->value();
const char* menu = o->text(line);
choose_menu(menu);}
          xywh {130 20 80 55} type Select box GTK_DOWN_BOX selection_color 80 align 4
          code0 {Apps app;}
          code1 {app.getMenus(o);}
        }
        Fl_Button {} {
          label {@+  Menu}
          callback {add_a_menu()->show();}
          tooltip {Add a menu item} xywh {10 275 65 35} box GTK_UP_BOX selection_color 47
        }
        Fl_Button {} {
          label { Menu}
          callback {remove_a_menu();}
          tooltip {remove a menu item} image {custom_buttons/minus} xywh {80 275 70 35} box GTK_UP_BOX align 256
        }
      }
    }
  }
  Function {add_window()} {open
  } {
    Fl_Window {} {
      label {Add an Item} open
      xywh {1117 307 350 220} type Double
      code0 {Config config;config.under_mouse(o);} xclass jwm-settings-manager visible
    } {
      Fl_Input add_label {
        label Label
        xywh {70 70 160 25} box GTK_DOWN_BOX
      }
      Fl_Input add_icon {
        label Icon
        xywh {70 100 160 25} box GTK_DOWN_BOX
      }
      Fl_Input add_input {
        label Program
        xywh {70 130 160 25} box GTK_DOWN_BOX
      }
      Fl_Check_Button add_button {
        label Confirm
        xywh {75 165 90 25} box GTK_DOWN_BOX down_box GTK_DOWN_BOX
      }
      Fl_Button add_prog_button {
        label Choose
        callback {Apps apps;apps.loadTemp();
const char *f = "/usr/bin";
const char *m = "Choose a Program";
const char *p = "*";
int r = 0;
char *result = fl_file_chooser(m,p,f,r);
if(result!=NULL){
	add_input->value(result);
}}
        xywh {235 130 90 25} box GTK_UP_BOX
      }
      Fl_Button {} {
        label OK
        callback {save_cb();}
        xywh {230 160 60 25} box GTK_UP_BOX color 61 labelcolor 7
      }
      Fl_Button add_icon_button {
        label Choose
        callback {Apps apps;apps.loadTemp();
const char *f = "/usr/share/pixmaps";
const char *m = "Choose an Icon";
const char *p = "*.{xbm,XBM,xpm,XPM,png,PNG,svg,SVG}";
int r = 0;
char *result = fl_file_chooser(m,p,f,r);
if(result!=NULL){
	add_icon->value(result);
}}
        xywh {235 100 90 25} box GTK_UP_BOX
      }
      Fl_Menu_Button {} {
        label {Item to add}
        xywh {20 20 130 25} box GTK_UP_BOX
      } {
        MenuItem {} {
          label Program
          callback {add_cb(0);}
          xywh {0 0 100 20}
        }
        MenuItem {} {
          label Restart
          callback {add_cb(1);}
          xywh {10 10 100 20}
        }
        MenuItem {} {
          label Exit
          callback {add_cb(2);}
          xywh {20 20 100 20}
        }
        MenuItem {} {
          label Separator
          callback {add_cb(3);}
          xywh {30 30 100 20}
        }
        MenuItem {} {
          label Include
          callback {add_cb(4);}
          xywh {40 40 100 20}
        }
        MenuItem {} {
          label Desktops
          callback {add_cb(5);}
          xywh {50 50 100 20}
        }
        MenuItem {} {
          label SendTo
          callback {add_cb(6);}
          xywh {60 60 100 20}
        }
        MenuItem {} {
          label Stick
          callback {add_cb(7);}
          xywh {70 70 100 20}
        }
        MenuItem {} {
          label Maximize
          callback {add_cb(8);}
          xywh {80 80 100 20}
        }
        MenuItem {} {
          label Minimize
          callback {add_cb(9);}
          xywh {90 90 100 20}
        }
        MenuItem {} {
          label Shade
          callback {add_cb(10);}
          xywh {100 100 100 20}
        }
        MenuItem {} {
          label Move
          callback {add_cb(11);}
          xywh {110 110 100 20}
        }
        MenuItem {} {
          label Resize
          callback {add_cb(12);}
          xywh {120 120 100 20}
        }
        MenuItem {} {
          label Kill
          callback {add_cb(13);}
          xywh {130 130 100 20}
        }
        MenuItem {} {
          label Close
          callback {add_cb(14);}
          xywh {140 140 100 20}
        }
        MenuItem {} {
          label Menu
          callback {add_cb(15);}
          xywh {150 150 100 20}
        }
      }
      Fl_Output item_display {
        xywh {175 20 130 25} box GTK_DOWN_BOX
      }
    }
  }
  Function {conf_window()} {open
  } {
    Fl_Window config_flwin {
      label {Configure the Item} open
      xywh {343 518 350 145} type Double hide
      code0 {Config config;config.under_mouse(o);} xclass jwm-settings-manager
    } {
      Fl_Input prog_label {
        label Label
        xywh {80 15 160 25} box GTK_DOWN_BOX
      }
      Fl_Input prog_icon {
        label Icon
        xywh {80 45 160 25} box GTK_DOWN_BOX
      }
      Fl_Input prog_input {
        label Program
        xywh {80 75 160 25} box GTK_DOWN_BOX
      }
      Fl_Check_Button conf_button {
        label Confirm
        xywh {85 110 90 25} box GTK_DOWN_BOX down_box GTK_DOWN_BOX
      }
      Fl_Button prog_button {
        label Choose
        callback {Apps apps;apps.loadTemp();
const char *f = "/usr/bin";
const char *m = "Choose a Program";
const char *p = "*";
int r = 0;
char *result = fl_file_chooser(m,p,f,r);
if(result!=NULL){
	prog_input->value(result);
	prog_input->redraw();
}}
        xywh {245 75 90 25} box GTK_UP_BOX
      }
      Fl_Button {} {
        label OK
        callback {configure_item();
config_flwin->hide();}
        xywh {240 105 60 25} box GTK_UP_BOX color 61 labelcolor 7
      }
      Fl_Button icon_button {
        label Choose
        callback {Apps apps;apps.loadTemp();
const char *f = "/usr/share/pixmaps";
const char *m = "Choose an Icon";
const char *p = "*.{xbm,XBM,xpm,XPM,png,PNG,svg,SVG}";
int r = 0;
char *result = fl_file_chooser(m,p,f,r);
if(result!=NULL){
  prog_icon->value(result);
  prog_icon->redraw();
}}
        xywh {245 45 90 25} box GTK_UP_BOX
      }
    }
  }
  Function {add_a_menu()} {open
  } {
    Fl_Window {} {
      label {Add a Menu} open
      xywh {911 362 300 160} type Double
      code0 {Config config;config.under_mouse(o);} xclass jwm-settings-manager visible
    } {
      Fl_Browser list_browser {
        label {Choose a menu value}
        tooltip {Determine which buttons on the root window activate the menu. This is a list of integers specifying buttons. The default is 123. Multiple root menus may be used by specifying different buttons to activate them. Valid values in this list are 0 to 9 and a to z. The usual mouse buttons are 1 for the left button, 2 for the middle button, 3 for the right button, and 4 and 5 for the scroll wheel. Therefore, accessing root menus that are assigned to buttons 0, 6, 7, 8, 9, or a letter will typically require the use of a tray button or key binding.} xywh {10 40 95 115} type Hold box GTK_DOWN_BOX selection_color 80 align 129
        code0 {Apps app;}
        code1 {app.listMenus(o);}
      }
      Fl_Input {} {
        label Label
        tooltip {The label to display at the top of the menu} xywh {170 45 120 30} box GTK_DOWN_BOX
      }
      Fl_Slider {} {
        label Height
        tooltip {The height of each menu item in pixels 0 indicates that the height of the font will determine the height. The default is 0.} xywh {170 85 120 30} type Horizontal box GTK_DOWN_BOX color 41 align 4 maximum 100
      }
      Fl_Check_Button {} {
        label {Labeled        }
        tooltip {Determines if a label appears at the top of the menu} xywh {190 15 25 25} down_box GTK_DOWN_BOX align 24
      }
      Fl_Button {} {
        label OK
        callback {save_cb();}
        xywh {225 130 60 25} box GTK_UP_BOX color 61 labelcolor 7
      }
    }
  }
  Function {add_an_item()} {open
  } {
    code {add_window()->show();} {}
  }
  Function {add_cb(int whichOne)} {open
  } {
    code {//Program 0
//Restart 1
//Exit 2
//Separator 3
//Include 4
//Desktops 5
//SendTo 6
//Stick 7
//Maximize 8
//Minimize 9
//Shade 10
//Move 11
//Resize 12
//Kill 13
//Close 14
//Menu (height,label,icon,labeled)
add_prog_button->hide();
add_input->hide();
add_button->hide();
add_label->show();
add_icon->show();
add_icon_button->show();

Apps app;
std::string result;
switch (whichOne){
  case 0:
    result="Program";
    add_prog_button->show();
    add_input->show();
    break;
  case 1:
    result="Restart";
    break;
  case 2:
    result="Exit";
    add_button->show();
    add_button->copy_label("Confirm");
    break;
  case 3:
    result="Separator";
    add_label->hide();
    add_icon->hide();
    add_icon_button->hide();
    break;
  case 4:
    result="Include";
    add_input->show();
    add_label->hide();
    add_icon->hide();
    add_icon_button->hide();
    break;
  case 5:
    result="Desktops";
    break;
  case 6:
    result="SendTo";
    break;
  case 7:
    result="Stick";
    break;
  case 8:
    result="Maximize";
    break;
  case 9:
    result="Minimize";
    break;
  case 10:
    result="Shade";
    break;
  case 11:
    result="Move";
    break;
  case 12:
    result="Resize";
    break;
  case 13:
    result="Kill";
    break;
  case 14:
    result="Close";
    break;
  case 15:
    result="Menu";
    add_button->show();
    add_button->copy_label("Labeled");
    break;
}
item_display->value(result.c_str());} {}
  }
  Function {choose_menu(const char* menu)} {open
  } {
    code {Apps app;
app.getMenuItems(menuElement,menu,menuElementText);
menuElementText->copy_label(menu);} {}
  }
  Function {configure_item()} {open
  } {
    code {Apps app;
int LINEposition = menuElement->value();
std::string NAME = menuElement->text(LINEposition);
app.ConfigMenuItem(menuElement,menuElementText,prog_label,prog_icon,prog_input,conf_button);
const char* menu = menuElementText->label();
choose_menu(menu);} {}
  }
  Function {confirm_check()} {open
  } {
    code {int LINEposition = menuElement->value();
std::string NAME = menuElement->text(LINEposition);
if(NAME.compare("Exit")!=0){conf_button->hide();}} {}
  }
  Function {edit_an_item()} {open
  } {
    code {conf_window()->show();} {}
  }
  Function {program_check()} {open
  } {
    code {int LINEposition = menuElement->value();
std::string NAME = menuElement->text(LINEposition);
if(NAME.compare("Program")!=0){
  prog_button->hide();
  prog_input->hide();
}
else{
  std::string TEXT = menuElementText->text(LINEposition);
  //prog_input->value(TEXT.c_str());
  //how do I do that??
}} {}
  }
  Function {remove_an_item()} {open
  } {
    code {std::cout<<"Remove"<<std::endl;} {}
  }
  Function {remove_a_menu()} {open
  } {
    code {int line = root_menu->value();
const char* value = root_menu->text(line);
if(value==NULL){return;}
Apps app;
app.removeMenu(value);
app.getMenus(root_menu);
menuElement->clear();
menuElementText->clear();} {}
  }
  Function {save_cb()} {open return_type int
  } {
    code {//save
const char* result = item_display->value();
Apps app;
return app.addMenuItem(menuElement, menuElementText, add_label, add_icon, add_input, add_button, result);} {}
  }
} 
